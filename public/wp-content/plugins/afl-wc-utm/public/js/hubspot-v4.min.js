/* AFL UTM Tracker v2.23.4 | HubSpot V4 | 20250815000 | Copyright 2020-2025 Appfromlab Pte Ltd | @preserve */
!function(){function r(e){var t=null;return t=l.config.hasOwnProperty(e)?o(l.config[e]):t}function e(e){var t=o(e);"object"==typeof t&&null!==t&&Object.getOwnPropertyNames(t).forEach(function(e){l.config.hasOwnProperty(e)&&(l.config[e]=t[e])})}function u(e,t){e=String(e),l.flags[e]=!0===t||1===t||"1"===t}function t(e){var t=!1;return t=void 0!==l.flags[e]?!0===l.flags[e]||1===l.flags[e]||"1"===l.flags[e]:t}function n(e){"string"==typeof e&&(l.current_event=e,"string"!=typeof(e=e)||function(e){for(var t=!1,n=0;n<l.saved_events.length;n++)if(l.saved_events[n]===e){t=!0;break}return t}(e)||l.saved_events.push(e))}function o(e){var t;return t=e,"[object Object]"===Object.prototype.toString.call(t)&&null!==t&&"function"==typeof Object.assign?Object.assign({},e):e}function a(){t("init")||(!function(){if(t("register_events"))return;u("register_events",!0),document.addEventListener("afl_wc_utm_event_run",function(e){n(e.name),u("utm_ready",!0),t("process_forms")&&f()}),document.addEventListener("hs-form-event:on-ready",async e=>{n(e.name),g(HubSpotFormsV4.getFormFromEvent(e),await HubSpotFormsV4.getFormFromEvent(e).getFormFieldValues()),u("crm_ready",!0)})}(),u("init",!0))}function i(){t("init")||a(),function e(t,n){c()?t():0<n?setTimeout(function(){e(t,n-1)},r("timeut_delay")):(_(),t())}(function(){f()},r("timeout_retries")),u("run",!0)}function f(){c()&&(window.AFLUTMTracker.has_consent()?(l.forms.forEach(function(n){n.fields.forEach(function(e){var t;"name"in e&&""!==e.name&&"value"in e&&"string"==typeof e.value&&window.AFLUTMTracker.merge_tag.is_tag(e.value)&&(t=window.AFLUTMTracker.merge_tag.replace(e.value),n.form.setFieldValue(e.name,t))})}),u("optin",!0),u("optout",!1),u("optin_before",!0)):function(){if(!r("merge_tag_optout")&&t("optin_before"))return;var o=r("merge_tag_optout_use_default"),a=r("merge_tag_optout_value");l.forms.forEach(function(r){r.fields.forEach(function(e){var t,n;"name"in e&&""!==e.name&&"value"in e&&"string"==typeof e.value&&window.AFLUTMTracker.merge_tag.is_tag(e.value)&&(t="",o&&window.AFLUTMTracker.merge_tag.tag_has_default(e.value)&&(""!==(n=window.AFLUTMTracker.merge_tag.replace(e.value))&&(t=n)),r.form.setFieldValue(e.name,t=""===t&&"string"==typeof a&&""!==a?a:t))})}),u("optin",!1),u("optout",!0)}(),u("process_forms",!0))}function c(){return!!s()&&(window.AFLUTMTracker.helper.get_flag("run")&&u("utm_ready",!0),!(!t("utm_ready")||!t("crm_ready")))}function s(){return"AFLUTMTracker"in window&&"HubSpotFormsV4"in window}function _(){if(!s())return!1;window.AFLUTMTracker.helper.get_flag("run")&&u("utm_ready",!0);var n=HubSpotFormsV4.getForms();"[object Array]"===Object.prototype.toString.call(n)&&0<n.length&&async function(){for(var e=0;e<n.length;e++){var t=await n[e].getFormFieldValues();g(n[e],t)}u("crm_ready",!0)}()}function g(e,t){var n=e.getFormId();!function(e){for(var t=!1,n=0;n<l.forms.length;n++)if(e===l.forms[n].id){t=!0;break}return t}(n)&&l.forms.push({id:n,form:e,fields:t})}function m(){return"object"==typeof window.afl_wc_utm_hubspot_v4_config&&null!==window.afl_wc_utm_hubspot_v4_config?o(afl_wc_utm_hubspot_v4_config):{}}var l;function d(){window.AFLUTMTrackerHubspotV4.autorun()}void 0===window.AFLUTMTrackerHubspotV4&&(window.AFLUTMTrackerHubspotV4=(l={config:{autorun:!0,timeout_retries:100,timeut_delay:100,merge_tag_optout:!0,merge_tag_optout_use_default:!1,merge_tag_optout_value:""},flags:{autorun:!1,init:!1,run:!1,process_forms:!1,register_events:!1,crm_ready:!1,utm_ready:!1,optin:!1,optin_before:!1,optout:!1},current_event:"",saved_events:[],forms:[]},{name:"AFLUTMTrackerHubspotV4",version:20250815e3,autorun:function(){return!(t("autorun")||(e(m()),!r("autorun")))&&(i(),u("autorun",!0),!0)},run:i,helper:{get_data:function(e){return l.hasOwnProperty(e)?o(l[e]):null},get_config:r,get_config_all:function(){return o(l.config)},set_config:function(e,t){l.config.hasOwnProperty(e)&&(l.config[e]=t)},map_config:e,get_user_config:m}}),"complete"===document.readyState?d():document.addEventListener("DOMContentLoaded",d))}();